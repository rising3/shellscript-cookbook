---
title: レシピ1-3 変数
---

bashのスクリプトでも変数は使用できる。
変数はスクリプト内で処理に必要な値を代入したり参照したりする際に使用する。

bashの変数名は、数字以外で始まる次の文字の組み合わせが使用できる。
- アルファベット大文字
- アルファベット小文字
- 数字
- アンダースコア(_)

:::note[変数の命名規則]
紹介した Google Shell Style Guide には、変数の命名規約について書かれている。

- 変数名には小文字を使用し、単語の区切りにはアンダースコア( `_` )を使用する。
:::

## 変数の代入と参照

bashでは、`変数名=値`の形式で変数を宣言して値を代入することができる。`=`記号の前後にスペースやタブを入れるとエラーになる。

```bash
value1=123
value2=hello
vaule3='Hello, world' # スペースやタブなどを含む場合は、シングルクォーテーション(`''`)で囲む
```
`declare 変数名=値`と変数を宣言することもできるが違いはない。
変数を空文字列で初期化したい場合は、値と設定しないか空文字列(`''`)を代入する。

```bash
value1=   # こちらの書き方が好まれる
value2=''
```

宣言した変数の値は、`$変数名`と書くことで参照できる。

```bash
» value1=hello
» echo $value1
hello
```

:::danger[未宣言の変数を参照してもエラーにならない]
bashでは、宣言されてない変数を参照してもエラーにならず、空文字列として取り扱われる。
:::

`$変数名`と書くことで変数の値を参照できると説明したが、変数の値と別の文字列を区別したい場合がある。

```bash
» hello=hello,
» echo $helloworld # $helloworldという変数を参照し、空文字列として取り扱われる

```

変数名を`{}`で囲むみように`${変数名}`と書くことで明示的に変数名を区別させることができる。

```bash
» hello=hello,
» echo ${hello}world
hello,world
```

誤った変数名として解釈されることを避けるために、変数を取り扱う場合は明示的に`${変数名}`と書くことが好ましい。

:::note[変数はクオートする]
紹介した Google Shell Style Guide にも、変数はクオートすることを強く推奨されている。
- [Google Shell Style Guide - Variable expansion](https://google.github.io/styleguide/shellguide.html#variable-expansion)
:::

## 変数のスコープ

スクリプト中に宣言した変数は、グローバル変数として取り扱われ、スクリプト中のどこからでも代入や参照できる。
